<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CSR µEnergy&reg; Firmware: Persistent Memory</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Persistent Memory<br/>
<small>
[<a class="el" href="group__MEMORY.html">Memory Management</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>The CSR1000 has a small amount of internal RAM that is capable of retaining its contents for a short while after power is removed (approximately one minute). This region can be used to hold temporary configuration information for short periods of power-loss, for example that would occur while a device battery was being replaced. The firmware makes available a subset of this RAM available for application use, and provides an interface for reading, writing, erasing, and validating the contents of that region. On power-up, the application can use the validation to find out if the persistent memory contents appear to be valid.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PM.html#gabc9570e3a5e01e95f7bf7f8218ea8fc6">PersistentMemIsValid</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows the user application to determine if the persistent memory appears valid.  <a href="#gabc9570e3a5e01e95f7bf7f8218ea8fc6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PM.html#gac93bf40341c30049ce8f9f0f55a0b530">PersistentMemRead</a> (uint16 *buffer, uint8 num_words)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the contents of the application persistent memory region.  <a href="#gac93bf40341c30049ce8f9f0f55a0b530"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PM.html#gabe7bb7dd2c8672d5af3ebabf0bf5e9a3">PersistentMemWrite</a> (uint16 *buffer, uint8 num_words)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to the application persistent memory region.  <a href="#gabe7bb7dd2c8672d5af3ebabf0bf5e9a3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PM.html#ga578491cfdf2ff9581a522902ac9552e6">PersistentMemErase</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the contents of the application persistent memory region.  <a href="#ga578491cfdf2ff9581a522902ac9552e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PM.html#gaec03e5353c1cffc578cfb79384efba4a">PersistentMemGetSize</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the size of the application persistent memory region.  <a href="#gaec03e5353c1cffc578cfb79384efba4a"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The CSR1000 has a small amount of internal RAM that is capable of retaining its contents for a short while after power is removed (approximately one minute). This region can be used to hold temporary configuration information for short periods of power-loss, for example that would occur while a device battery was being replaced. The firmware makes available a subset of this RAM available for application use, and provides an interface for reading, writing, erasing, and validating the contents of that region. On power-up, the application can use the validation to find out if the persistent memory contents appear to be valid. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga578491cfdf2ff9581a522902ac9552e6"></a><!-- doxytag: member="persistent.h::PersistentMemErase" ref="ga578491cfdf2ff9581a522902ac9552e6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PersistentMemErase </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Clear the contents of the application persistent memory region. </p>
<p>Clear the contents of the application persistent memory region and indicate that the application is no longer using it. The region will be cleared and invalidated.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
<a class="anchor" id="gaec03e5353c1cffc578cfb79384efba4a"></a><!-- doxytag: member="persistent.h::PersistentMemGetSize" ref="gaec03e5353c1cffc578cfb79384efba4a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8 PersistentMemGetSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the size of the application persistent memory region. </p>
<p>Return the size of the application persistent memory region. This represents the maximum number of words that can be stored in the region, although the application can store less if needed.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Size of memory region in words. </dd></dl>

</div>
</div>
<a class="anchor" id="gabc9570e3a5e01e95f7bf7f8218ea8fc6"></a><!-- doxytag: member="persistent.h::PersistentMemIsValid" ref="gabc9570e3a5e01e95f7bf7f8218ea8fc6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PersistentMemIsValid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allows the user application to determine if the persistent memory appears valid. </p>
<p>NOTE: As the persistence is controlled by the slow discharge of a capacitor the exact period the persistent data remains valid is not specified. Also, the exact nature of corruption on the RAM around the point the capacitor charge fully dissipates cannot be specified. "Validity" therefore cannot be guaranteed.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>TRUE if the application region appears to hold valid data. </dd></dl>

</div>
</div>
<a class="anchor" id="gac93bf40341c30049ce8f9f0f55a0b530"></a><!-- doxytag: member="persistent.h::PersistentMemRead" ref="gac93bf40341c30049ce8f9f0f55a0b530" args="(uint16 *buffer, uint8 num_words)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8 PersistentMemRead </td>
          <td>(</td>
          <td class="paramtype">uint16 *&#160;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8&#160;</td>
          <td class="paramname"> <em>num_words</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the contents of the application persistent memory region. </p>
<p>Copy the contents of the application persistent memory region into the buffer supplied by the application. The application must specify how big the buffer is; if the buffer is larger than the region then only the contents of the region will be returned. The actual number of words copied is returned by the function. NOTE: This function will always return the contents of the region, even if those contents do not appear to be valid. <a class="el" href="group__PM.html#gabc9570e3a5e01e95f7bf7f8218ea8fc6" title="Allows the user application to determine if the persistent memory appears valid.">PersistentMemIsValid()</a> should be used to check validity.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>A pointer to the the buffer supplied by the application </td></tr>
    <tr><td class="paramname">num_words</td><td>Size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of words copied to the buffer. </dd></dl>

</div>
</div>
<a class="anchor" id="gabe7bb7dd2c8672d5af3ebabf0bf5e9a3"></a><!-- doxytag: member="persistent.h::PersistentMemWrite" ref="gabe7bb7dd2c8672d5af3ebabf0bf5e9a3" args="(uint16 *buffer, uint8 num_words)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8 PersistentMemWrite </td>
          <td>(</td>
          <td class="paramtype">uint16 *&#160;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8&#160;</td>
          <td class="paramname"> <em>num_words</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write to the application persistent memory region. </p>
<p>Copy the contents of the buffer supplied by the application into the application persistent memory region. The application must specify how big the buffer is; if the buffer is larger than the region then only enough data to fill the region will be copied. The actual number of words copied is returned by the function. After the data has been copied to the region, the firmware will calculate validation information, which will be used by <a class="el" href="group__PM.html#gabc9570e3a5e01e95f7bf7f8218ea8fc6" title="Allows the user application to determine if the persistent memory appears valid.">PersistentMemIsValid()</a> to determine whether or not the region is valid.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>A pointer to the the buffer supplied by the application </td></tr>
    <tr><td class="paramname">num_words</td><td>Size of the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of words copied from the buffer. </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Jun 22 2016 11:39:14 for CSR µEnergy&reg; Firmware by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
