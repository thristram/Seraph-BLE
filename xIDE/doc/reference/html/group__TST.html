<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CSR ÂµEnergy&reg; Firmware: Production Test</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Production Test</h1>  </div>
</div>
<div class="contents">

<p>These functions allow the application to enable the BLE 2-wire Direct Test Mode, or to manually call directly into the Host Controller test modes for LE Transmit and LE Receive tests.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#gae2a337bd8b505900432b4dd103929b81">DirectTestTransmitCount</a>()&#160;&#160;&#160;DirectTestReceiveResults(NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of packets transmitted since the start of the test.  <a href="#gae2a337bd8b505900432b4dd103929b81"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#ga9a87ac49936a1bbf6834829ccb45fac6">ble_test_pkt_type</a> { <br/>
&#160;&#160;<a class="el" href="group__TST.html#gga9a87ac49936a1bbf6834829ccb45fac6a2ed82f7bb42dce062627884664cd6031">ble_test_pkt_prbs9</a>, 
<a class="el" href="group__TST.html#gga9a87ac49936a1bbf6834829ccb45fac6ae49cf8134546e42d3a219c19406fc168">ble_test_pkt_11110000</a>, 
<a class="el" href="group__TST.html#gga9a87ac49936a1bbf6834829ccb45fac6ae52f4bd68ccd56df5f07ff7481a2d4ca">ble_test_pkt_10101010</a>, 
<a class="el" href="group__TST.html#gga9a87ac49936a1bbf6834829ccb45fac6aead11c0f7732b3fc798e4a47e3a980d9">ble_test_pkt_prbs15</a>, 
<br/>
&#160;&#160;<a class="el" href="group__TST.html#gga9a87ac49936a1bbf6834829ccb45fac6a8d15d02c5bd97d8c1e5197c81f2f0a30">ble_test_pkt_all_1</a>, 
<a class="el" href="group__TST.html#gga9a87ac49936a1bbf6834829ccb45fac6a53283ef3aa4834a23254b588ceea96a1">ble_test_pkt_all_0</a>, 
<a class="el" href="group__TST.html#gga9a87ac49936a1bbf6834829ccb45fac6ad1e12005e1250dd1e20cf42856fc2355">ble_test_pkt_00001111</a>, 
<a class="el" href="group__TST.html#gga9a87ac49936a1bbf6834829ccb45fac6aab9ff488b60173eb675ecce3482fb633">ble_test_pkt_01010101</a>
<br/>
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><p>Supported packet payloads for BLE Transmit test. </p>
 <a href="group__TST.html#ga9a87ac49936a1bbf6834829ccb45fac6">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STAT.html#ga4d0e4416aa801fbed0a19d3d24fdbba6">sys_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#gabdcba543ee2020d4147b3778af79d938">DirectTestReceive</a> (uint8 rx_channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start radio test mode, receiving test packets generated by a Bluetooth tester.  <a href="#gabdcba543ee2020d4147b3778af79d938"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#ga00bd5d9841bf97b5fe9c1347146081e9">DirectTestReceiveResults</a> (int16 *p_average_rssi)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of packets received since the start of the test. If the passed in pointer is not NULL use that to store the averaged RSSI.  <a href="#ga00bd5d9841bf97b5fe9c1347146081e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STAT.html#ga4d0e4416aa801fbed0a19d3d24fdbba6">sys_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#ga3ea054da5e5baf25d510d7d0116420c8">DirectTestTransmit</a> (uint8 tx_channel, uint8 payload_length, <a class="el" href="group__TST.html#ga9a87ac49936a1bbf6834829ccb45fac6">ble_test_pkt_type</a> payload_type, uint16 num_packets)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start radio test mode, transmitting test packets to a Bluetooth tester.  <a href="#ga3ea054da5e5baf25d510d7d0116420c8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STAT.html#ga4d0e4416aa801fbed0a19d3d24fdbba6">sys_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#ga094d09be741e8f16bf091dad84836cd4">DirectTestEnd</a> (uint16 *num_packets)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">End the current radio test and return the number of packets processed.  <a href="#ga094d09be741e8f16bf091dad84836cd4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#ga7e61d9919c26f9aa157268dbc635176b">TestSetXtalTrim</a> (uint16 xtal_trim)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Extended test function to allow the application to adjust the 16MHz crystal trim value.  <a href="#ga7e61d9919c26f9aa157268dbc635176b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#ga037fcf0385fd408fe036238a57f65766">TestGetXtalTrim</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the current crystal trim value from the hardware and return the value to the caller.  <a href="#ga037fcf0385fd408fe036238a57f65766"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#ga96ce4046b8170820c60068d86b9ba328">TestEnableCarrierWave</a> (uint16 rf_channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Extended test function to allow the application to request continuous transmission of an unmodulated carrier wave on a given RF channel.  <a href="#ga96ce4046b8170820c60068d86b9ba328"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#ga7b1ff95c4fa858eeff94dac21b1cd416">TestDisableCarrierWave</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Extended test function to allow the application to stop transmitting an unmodulated carrier wave.  <a href="#ga7b1ff95c4fa858eeff94dac21b1cd416"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#gac5aacda3aa0cc41c1e45f413af136916">DirectTestInit</a> (<a class="el" href="group__PWRMGMT.html#ga0e9693b0d29967f608c51115dc40b2e2">sleep_state</a> last_sleep_state)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the Bluetooth low energy 2-wire UART Direct Test Mode.  <a href="#gac5aacda3aa0cc41c1e45f413af136916"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__TST.html#ga03b1e769e044fce845eb938e15b5dcfc">DirectTestExtended</a> (bool enable)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable CSR1000 Extended Direct Test Mode.  <a href="#ga03b1e769e044fce845eb938e15b5dcfc"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>These functions allow the application to enable the BLE 2-wire Direct Test Mode, or to manually call directly into the Host Controller test modes for LE Transmit and LE Receive tests. </p>
<p>Direct Test Mode can either be built into a standalone application or can be integrated into a end product application. This can be possible even if the application normally uses the UART (or its PIOs) for something else. For example, if a product has one spare PIO, this PIO can be used in a production test environment to provide a switch checked by the application to determine if Direct Test Mode is required. This check can be performed in <a class="el" href="group__APP.html#ga473c6510c0fcd66f941d94c93bb7ebbe" title="Application function called after a power-on reset etc.">AppInit()</a> before the system has fully initialised.</p>
<p>Further information on Direct Test Mode can be found in the Bluetooth Specification v4.0 Volume 6 Part F.</p>
<p>Further information on the Host Controller test modes can be found in the Bluetooth Specification v4.0 Volume 2 Part E sections 7.8.28 - 7.8.30. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gae2a337bd8b505900432b4dd103929b81"></a><!-- doxytag: member="ble_hci_test.h::DirectTestTransmitCount" ref="gae2a337bd8b505900432b4dd103929b81" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DirectTestTransmitCount</td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td>&#160;&#160;&#160;DirectTestReceiveResults(NULL)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the number of packets transmitted since the start of the test. </p>
<p>For now, the RX and TX counts are shared, so this function redirects to <a class="el" href="group__TST.html#ga00bd5d9841bf97b5fe9c1347146081e9" title="Return the number of packets received since the start of the test. If the passed in pointer is not NU...">DirectTestReceiveResults()</a>. However, this may change in future, so applications should always call <a class="el" href="group__TST.html#gae2a337bd8b505900432b4dd103929b81" title="Return the number of packets transmitted since the start of the test.">DirectTestTransmitCount()</a> to get the transmit count.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of packets </dd></dl>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga9a87ac49936a1bbf6834829ccb45fac6"></a><!-- doxytag: member="ble_hci_test.h::ble_test_pkt_type" ref="ga9a87ac49936a1bbf6834829ccb45fac6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__TST.html#ga9a87ac49936a1bbf6834829ccb45fac6">ble_test_pkt_type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Supported packet payloads for BLE Transmit test. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga9a87ac49936a1bbf6834829ccb45fac6a2ed82f7bb42dce062627884664cd6031"></a><!-- doxytag: member="ble_test_pkt_prbs9" ref="gga9a87ac49936a1bbf6834829ccb45fac6a2ed82f7bb42dce062627884664cd6031" args="" -->ble_test_pkt_prbs9</em>&nbsp;</td><td>
<p>Pseudo-Random Bit Sequence 9 </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga9a87ac49936a1bbf6834829ccb45fac6ae49cf8134546e42d3a219c19406fc168"></a><!-- doxytag: member="ble_test_pkt_11110000" ref="gga9a87ac49936a1bbf6834829ccb45fac6ae49cf8134546e42d3a219c19406fc168" args="" -->ble_test_pkt_11110000</em>&nbsp;</td><td>
<p>Pattern of alternating bits '11110000' </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga9a87ac49936a1bbf6834829ccb45fac6ae52f4bd68ccd56df5f07ff7481a2d4ca"></a><!-- doxytag: member="ble_test_pkt_10101010" ref="gga9a87ac49936a1bbf6834829ccb45fac6ae52f4bd68ccd56df5f07ff7481a2d4ca" args="" -->ble_test_pkt_10101010</em>&nbsp;</td><td>
<p>Pattern of alternating bits '10101010' </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga9a87ac49936a1bbf6834829ccb45fac6aead11c0f7732b3fc798e4a47e3a980d9"></a><!-- doxytag: member="ble_test_pkt_prbs15" ref="gga9a87ac49936a1bbf6834829ccb45fac6aead11c0f7732b3fc798e4a47e3a980d9" args="" -->ble_test_pkt_prbs15</em>&nbsp;</td><td>
<p>Pseudo-Random Bit Sequence 15 </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga9a87ac49936a1bbf6834829ccb45fac6a8d15d02c5bd97d8c1e5197c81f2f0a30"></a><!-- doxytag: member="ble_test_pkt_all_1" ref="gga9a87ac49936a1bbf6834829ccb45fac6a8d15d02c5bd97d8c1e5197c81f2f0a30" args="" -->ble_test_pkt_all_1</em>&nbsp;</td><td>
<p>Pattern of all '1' bits </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga9a87ac49936a1bbf6834829ccb45fac6a53283ef3aa4834a23254b588ceea96a1"></a><!-- doxytag: member="ble_test_pkt_all_0" ref="gga9a87ac49936a1bbf6834829ccb45fac6a53283ef3aa4834a23254b588ceea96a1" args="" -->ble_test_pkt_all_0</em>&nbsp;</td><td>
<p>Pattern of all '0' bits </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga9a87ac49936a1bbf6834829ccb45fac6ad1e12005e1250dd1e20cf42856fc2355"></a><!-- doxytag: member="ble_test_pkt_00001111" ref="gga9a87ac49936a1bbf6834829ccb45fac6ad1e12005e1250dd1e20cf42856fc2355" args="" -->ble_test_pkt_00001111</em>&nbsp;</td><td>
<p>Pattern of alternating bits '00001111' </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga9a87ac49936a1bbf6834829ccb45fac6aab9ff488b60173eb675ecce3482fb633"></a><!-- doxytag: member="ble_test_pkt_01010101" ref="gga9a87ac49936a1bbf6834829ccb45fac6aab9ff488b60173eb675ecce3482fb633" args="" -->ble_test_pkt_01010101</em>&nbsp;</td><td>
<p>Pattern of alternating bits '01010101' </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga094d09be741e8f16bf091dad84836cd4"></a><!-- doxytag: member="ble_hci_test.h::DirectTestEnd" ref="ga094d09be741e8f16bf091dad84836cd4" args="(uint16 *num_packets)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__STAT.html#ga4d0e4416aa801fbed0a19d3d24fdbba6">sys_status</a> DirectTestEnd </td>
          <td>(</td>
          <td class="paramtype">uint16 *&#160;</td>
          <td class="paramname"> <em>num_packets</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End the current radio test and return the number of packets processed. </p>
<p>This function can only be called when a test is running.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">num_packets</td><td>Pointer to storage for number of packets processed</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status of operation </dd></dl>

</div>
</div>
<a class="anchor" id="ga03b1e769e044fce845eb938e15b5dcfc"></a><!-- doxytag: member="ble_direct_test.h::DirectTestExtended" ref="ga03b1e769e044fce845eb938e15b5dcfc" args="(bool enable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DirectTestExtended </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"> <em>enable</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable or disable CSR1000 Extended Direct Test Mode. </p>
<p>Extended Direct Test Mode allows the test system to use proprietary commands for trimming the 16MHz crystal or continuously transmitting a Carrier Wave on a specific RF channel. As these functions may interfere with third-party test equipment the application needs to enable this mode before it can be used.</p>
<p>This function should be called after calling <a class="el" href="group__TST.html#gac5aacda3aa0cc41c1e45f413af136916" title="Initialise the Bluetooth low energy 2-wire UART Direct Test Mode.">DirectTestInit()</a>. Extended Direct Test Mode is disabled if <a class="el" href="group__TST.html#gac5aacda3aa0cc41c1e45f413af136916" title="Initialise the Bluetooth low energy 2-wire UART Direct Test Mode.">DirectTestInit()</a> is called again.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">enable</td><td>TRUE to enable Extended Direct Test Mode, or FALSE to disable.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
<a class="anchor" id="gac5aacda3aa0cc41c1e45f413af136916"></a><!-- doxytag: member="ble_direct_test.h::DirectTestInit" ref="gac5aacda3aa0cc41c1e45f413af136916" args="(sleep_state last_sleep_state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DirectTestInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PWRMGMT.html#ga0e9693b0d29967f608c51115dc40b2e2">sleep_state</a>&#160;</td>
          <td class="paramname"> <em>last_sleep_state</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialise the Bluetooth low energy 2-wire UART Direct Test Mode. </p>
<p>This function configures the UART for Direct Test Mode. While enabled the firmware will automatically handle all test commands received over the UART and start or stop the requested test mode.</p>
<p>The normal way to terminate Direct Test Mode is to perform a device reset (by sending the LE_Reset from the tester, or if the application calls <a class="el" href="group__RST.html#gaa0fba796e3a7d51abd26de190fbe147f" title="Trigger a warm reset of the CSR1000, reloading code from the boot device and resetting the hardware...">WarmReset()</a>). If the application manually reconfigures the UART without first resetting (e.g. directly calling <a class="el" href="group__UART.html#ga079126f89b47a14594bc75694dd9f189" title="Initialise the UART interface.">UartInit()</a>, or by calling <a class="el" href="group__DBG.html#ga8f0ddc73d6b7f1571f80cecd60a0771c" title="Set up the IO system.">DebugInit()</a>), the test mode handler will be disabled, but there is a risk that a radio test will remain active.</p>
<p>The UART data rate and configuration is taken from the CS.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>After calling this function it is recommended that the application does not directly call <a class="el" href="group__TST.html#gabdcba543ee2020d4147b3778af79d938" title="Start radio test mode, receiving test packets generated by a Bluetooth tester.">DirectTestReceive()</a>, <a class="el" href="group__TST.html#ga3ea054da5e5baf25d510d7d0116420c8" title="Start radio test mode, transmitting test packets to a Bluetooth tester.">DirectTestTransmit()</a> or <a class="el" href="group__TST.html#ga094d09be741e8f16bf091dad84836cd4" title="End the current radio test and return the number of packets processed.">DirectTestEnd()</a>, as this could interfere with any tests initiated by an external tester via the UART.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
<a class="anchor" id="gabdcba543ee2020d4147b3778af79d938"></a><!-- doxytag: member="ble_hci_test.h::DirectTestReceive" ref="gabdcba543ee2020d4147b3778af79d938" args="(uint8 rx_channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__STAT.html#ga4d0e4416aa801fbed0a19d3d24fdbba6">sys_status</a> DirectTestReceive </td>
          <td>(</td>
          <td class="paramtype">uint8&#160;</td>
          <td class="paramname"> <em>rx_channel</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start radio test mode, receiving test packets generated by a Bluetooth tester. </p>
<p>The caller should supply the RF channel number to receive packets on. The valid range for the channel is 0x00 to 0x27, which corresponds to a frequency range of 2402MHz - 2480MHz, calculated as F = (2*rx_channel) + 2402.</p>
<p>This function should not be called if a test is already running.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>THIS FUNCTION IS FOR RF TESTING DURING DEVELOPMENT AND PRODUCTION TEST. It must not be used during normal application operation. After calling this and the other BLE Test functions, the radio may be in an unknown state therefore a device reset is recommended.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rx_channel</td><td>Channel number to use for the test</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status of operation </dd></dl>

</div>
</div>
<a class="anchor" id="ga00bd5d9841bf97b5fe9c1347146081e9"></a><!-- doxytag: member="ble_hci_test.h::DirectTestReceiveResults" ref="ga00bd5d9841bf97b5fe9c1347146081e9" args="(int16 *p_average_rssi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16 DirectTestReceiveResults </td>
          <td>(</td>
          <td class="paramtype">int16 *&#160;</td>
          <td class="paramname"> <em>p_average_rssi</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the number of packets received since the start of the test. If the passed in pointer is not NULL use that to store the averaged RSSI. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">p_average_rssi</td><td>Pointer to variable to hold averaged RSSI value or NULL, if the RSSI is not required</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of packets </dd></dl>

</div>
</div>
<a class="anchor" id="ga3ea054da5e5baf25d510d7d0116420c8"></a><!-- doxytag: member="ble_hci_test.h::DirectTestTransmit" ref="ga3ea054da5e5baf25d510d7d0116420c8" args="(uint8 tx_channel, uint8 payload_length, ble_test_pkt_type payload_type, uint16 num_packets)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__STAT.html#ga4d0e4416aa801fbed0a19d3d24fdbba6">sys_status</a> DirectTestTransmit </td>
          <td>(</td>
          <td class="paramtype">uint8&#160;</td>
          <td class="paramname"> <em>tx_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8&#160;</td>
          <td class="paramname"> <em>payload_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__TST.html#ga9a87ac49936a1bbf6834829ccb45fac6">ble_test_pkt_type</a>&#160;</td>
          <td class="paramname"> <em>payload_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"> <em>num_packets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start radio test mode, transmitting test packets to a Bluetooth tester. </p>
<p>The caller should supply the RF channel number to transmit packets on. The valid range for the channel is 0x00 to 0x27, which corresponds to a frequency range of 2402MHz - 2480MHz, calculated as F = (2*rx_channel) + 2402.</p>
<p>The payload length ranges from 0x00 to 0x25 bytes. All standard Bluetooth test packet types are supported.</p>
<p>The caller can also provide the number of packets to transmit. If the test should run indefinitely, set the count to 0, and the test will only stop transmitting if <a class="el" href="group__TST.html#ga094d09be741e8f16bf091dad84836cd4" title="End the current radio test and return the number of packets processed.">DirectTestEnd()</a> is called.</p>
<p>This function should not be called if a test is already running.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>THIS FUNCTION IS FOR RF TESTING DURING DEVELOPMENT AND PRODUCTION TEST. It must not be used during normal application operation. After calling this and the other BLE Test functions, the radio may be in an unknown state therefore a device reset is recommended.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">tx_channel</td><td>Channel number to use for the test </td></tr>
    <tr><td class="paramname">payload_length</td><td>Number of bytes to transmit in the data payload </td></tr>
    <tr><td class="paramname">payload_type</td><td>Data payload format </td></tr>
    <tr><td class="paramname">num_packets</td><td>Number of packets to transmit, or 0 for indefinite</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status of operation </dd></dl>

</div>
</div>
<a class="anchor" id="ga7b1ff95c4fa858eeff94dac21b1cd416"></a><!-- doxytag: member="ble_hci_test.h::TestDisableCarrierWave" ref="ga7b1ff95c4fa858eeff94dac21b1cd416" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TestDisableCarrierWave </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extended test function to allow the application to stop transmitting an unmodulated carrier wave. </p>
<p>This function only guarantees to stop radio transmission. It will leave the radio hardware and other parts of the chip in an undefined state unsuitable for normal operation. After CW testing has been completed it is recommended that the chip is reset using <a class="el" href="group__RST.html#gaa0fba796e3a7d51abd26de190fbe147f" title="Trigger a warm reset of the CSR1000, reloading code from the boot device and resetting the hardware...">WarmReset()</a>.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This function must only be called during production test.</dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing </dd></dl>

</div>
</div>
<a class="anchor" id="ga96ce4046b8170820c60068d86b9ba328"></a><!-- doxytag: member="ble_hci_test.h::TestEnableCarrierWave" ref="ga96ce4046b8170820c60068d86b9ba328" args="(uint16 rf_channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TestEnableCarrierWave </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"> <em>rf_channel</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extended test function to allow the application to request continuous transmission of an unmodulated carrier wave on a given RF channel. </p>
<p>Legitimate values for the rf_channel parameter are 0 to 39. If the application attempts to use a channel higher than 39 the request will be ignored. The carrier wave transmission can be disabled by calling <a class="el" href="group__TST.html#ga7b1ff95c4fa858eeff94dac21b1cd416" title="Extended test function to allow the application to stop transmitting an unmodulated carrier wave...">TestDisableCarrierWave()</a>.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This function must only be called during production test.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rf_channel</td><td>RF channel range 0-39</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing </dd></dl>

</div>
</div>
<a class="anchor" id="ga037fcf0385fd408fe036238a57f65766"></a><!-- doxytag: member="ble_hci_test.h::TestGetXtalTrim" ref="ga037fcf0385fd408fe036238a57f65766" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16 TestGetXtalTrim </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the current crystal trim value from the hardware and return the value to the caller. </p>
<p>Legitimate values for the xtal_trim parameter are 0x00 to 0x3F (bits 0 to 5).</p>
<p>This function is only for use during production test. During normal operation the crystal trim value will not change.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Crystal trim value in range 0x00 to 0x3F </dd></dl>

</div>
</div>
<a class="anchor" id="ga7e61d9919c26f9aa157268dbc635176b"></a><!-- doxytag: member="ble_hci_test.h::TestSetXtalTrim" ref="ga7e61d9919c26f9aa157268dbc635176b" args="(uint16 xtal_trim)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TestSetXtalTrim </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"> <em>xtal_trim</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extended test function to allow the application to adjust the 16MHz crystal trim value. </p>
<p>Legitimate values for the xtal_trim parameter are 0x00 to 0x3F (bits 0 to 5). Any other bits set in the xtal_trim parameter will be ignored.</p>
<p>This function is typically used in conjunction with <a class="el" href="group__TST.html#ga96ce4046b8170820c60068d86b9ba328" title="Extended test function to allow the application to request continuous transmission of an unmodulated ...">TestEnableCarrierWave()</a> to allow the crystal frequency to be measured and trimmed, to get as close to an ideal value as possible. Once the best value has been found it should be written to the device Configuration Store (using appropriate tools on the host PC).</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This function must only be called during production test. Adjusting this parameter during normal operation could result in the chip operating in a non-compliant manner.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">xtal_trim</td><td>Crystal trim value in range 0x00 to 0x3F</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Jun 22 2016 11:39:15 for CSR ÂµEnergy&reg; Firmware by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
