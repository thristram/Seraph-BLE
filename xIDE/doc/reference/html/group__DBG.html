<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CSR µEnergy&reg; Firmware: Debug</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Debug</h1>  </div>
</div>
<div class="contents">

<p>These functions provide a simple interface to the <a class="el" href="group__UART.html">UART</a> driver, to allow an application to send basic text strings across the UART, primarily for sending debugging messages to a serial terminal. If this module is used then the application is unable to make direct use of the UART. The functions allow for writing a single character, a NUL-terminated string, and can also convert integers (8-, 16- or 32-bit and times (48-bit) to ASCII representation (as unsigned hexadecimal).  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBG.html#gad94f22b2cc6918b7068fce736a0ec23f">DebugWriteData</a>(data, nbytes)&#160;&#160;&#160;UartWriteBlocking(data, nbytes)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write unpacked data over the UART.  <a href="#gad94f22b2cc6918b7068fce736a0ec23f"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBG.html#ga8f0ddc73d6b7f1571f80cecd60a0771c">DebugInit</a> (uint16 rx_threshold, <a class="el" href="group__UART.html#ga6a4e452497b935a69b96884052e8d8d9">uart_data_in_fn</a> rx_event_handler, <a class="el" href="group__UART.html#gac5fd37c212408a4690b681c275b0c851">uart_data_out_fn</a> tx_event_handler)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the IO system.  <a href="#ga8f0ddc73d6b7f1571f80cecd60a0771c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBG.html#gacba63055b91b86df0d32caa0bd840e69">DebugWriteChar</a> (char const val)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write an ASCII character (unsigned 8-bit value) to the UART.  <a href="#gacba63055b91b86df0d32caa0bd840e69"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBG.html#gae1cda846405bb1613f6acbafd25a1cc1">DebugWriteUint8</a> (uint8 const val)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an 8-bit value into an ASCII string of two hexadecimal digits and send it to the UART.  <a href="#gae1cda846405bb1613f6acbafd25a1cc1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBG.html#ga0a6378b3cf1311d8521c54ca02a1f4e8">DebugWriteUint16</a> (uint16 const val)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a 16-bit value into an ASCII string of four hexadecimal digits and send it to the UART.  <a href="#ga0a6378b3cf1311d8521c54ca02a1f4e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBG.html#ga3a3fda37b97236209a8f1e678a7d42f3">DebugWriteUint32</a> (uint32 const val)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a 32-bit value into an ASCII string of eight hexadecimal digits and send it to the UART.  <a href="#ga3a3fda37b97236209a8f1e678a7d42f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBG.html#gae31f2428971a9a804ad7dc500f62d52c">DebugWriteTime48</a> (uint16 const *val)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a 48-bit time value into an ASCII string of twelve hexadecimal digits and send it to the UART.  <a href="#gae31f2428971a9a804ad7dc500f62d52c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__DBG.html#ga4f1cf6046c1f4e41e6f43b66a3787298">DebugWriteString</a> (const char *string)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a C string (i.e. unpacked data) over the UART.  <a href="#ga4f1cf6046c1f4e41e6f43b66a3787298"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>These functions provide a simple interface to the <a class="el" href="group__UART.html">UART</a> driver, to allow an application to send basic text strings across the UART, primarily for sending debugging messages to a serial terminal. If this module is used then the application is unable to make direct use of the UART. The functions allow for writing a single character, a NUL-terminated string, and can also convert integers (8-, 16- or 32-bit and times (48-bit) to ASCII representation (as unsigned hexadecimal). </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gad94f22b2cc6918b7068fce736a0ec23f"></a><!-- doxytag: member="debug.h::DebugWriteData" ref="gad94f22b2cc6918b7068fce736a0ec23f" args="(data, nbytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DebugWriteData</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">data, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">nbytes&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;UartWriteBlocking(data, nbytes)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write unpacked data over the UART. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The <code>uint8</code> data to send. </td></tr>
    <tr><td class="paramname">nbytes</td><td>The number of <em>bytes</em> of data to send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga8f0ddc73d6b7f1571f80cecd60a0771c"></a><!-- doxytag: member="debug.h::DebugInit" ref="ga8f0ddc73d6b7f1571f80cecd60a0771c" args="(uint16 rx_threshold, uart_data_in_fn rx_event_handler, uart_data_out_fn tx_event_handler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DebugInit </td>
          <td>(</td>
          <td class="paramtype">uint16&#160;</td>
          <td class="paramname"> <em>rx_threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__UART.html#ga6a4e452497b935a69b96884052e8d8d9">uart_data_in_fn</a>&#160;</td>
          <td class="paramname"> <em>rx_event_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__UART.html#gac5fd37c212408a4690b681c275b0c851">uart_data_out_fn</a>&#160;</td>
          <td class="paramname"> <em>tx_event_handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set up the IO system. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rx_threshold</td><td>Number of bytes of input required to trigger a call to <em>rx_event_handler</em>. 1 is a safe value to pass if the application does not intend to receive data.</td></tr>
    <tr><td class="paramname">tx_event_handler</td><td>Pointer to a function of type <a class="el" href="group__UART.html#gac5fd37c212408a4690b681c275b0c851">uart_data_out_fn</a> that will be called whenever a UART transmission has finished.</td></tr>
    <tr><td class="paramname">rx_event_handler</td><td>Pointer to a function of type <a class="el" href="group__UART.html#ga6a4e452497b935a69b96884052e8d8d9">uart_data_in_fn</a> that will be called whenever the threshold number of bytes have been received over the UART.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing.</dd></dl>
<p>This function configures how the application wishes to use the debug output. For normal debug, pass <code>0</code>, <code>NULL</code>, <code>NULL</code> as the parameters; the various DebugWrite functions will operate normally with those parameters.</p>
<p>If an application wishes to use the API to send debug messages, but also wishes to receive data (e.g. simple key presses from a PC-based terminal application) it may register an RX callback function to handle received bytes. No additional support is supplied for processing UART input, so it needs to be handled entirely by the application.</p>
<p>Note that the UART data rate and configuration is taken from the CS. </p>

</div>
</div>
<a class="anchor" id="gacba63055b91b86df0d32caa0bd840e69"></a><!-- doxytag: member="debug.h::DebugWriteChar" ref="gacba63055b91b86df0d32caa0bd840e69" args="(char const val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DebugWriteChar </td>
          <td>(</td>
          <td class="paramtype">char const &#160;</td>
          <td class="paramname"> <em>val</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write an ASCII character (unsigned 8-bit value) to the UART. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>The character to send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4f1cf6046c1f4e41e6f43b66a3787298"></a><!-- doxytag: member="debug.h::DebugWriteString" ref="ga4f1cf6046c1f4e41e6f43b66a3787298" args="(const char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DebugWriteString </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"> <em>string</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a C string (i.e. unpacked data) over the UART. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>The NUL-terminated string to send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
<a class="anchor" id="gae31f2428971a9a804ad7dc500f62d52c"></a><!-- doxytag: member="debug.h::DebugWriteTime48" ref="gae31f2428971a9a804ad7dc500f62d52c" args="(uint16 const *val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DebugWriteTime48 </td>
          <td>(</td>
          <td class="paramtype">uint16 const *&#160;</td>
          <td class="paramname"> <em>val</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert a 48-bit time value into an ASCII string of twelve hexadecimal digits and send it to the UART. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>The <code>time48</code> value to convert and send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0a6378b3cf1311d8521c54ca02a1f4e8"></a><!-- doxytag: member="debug.h::DebugWriteUint16" ref="ga0a6378b3cf1311d8521c54ca02a1f4e8" args="(uint16 const val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DebugWriteUint16 </td>
          <td>(</td>
          <td class="paramtype">uint16 const &#160;</td>
          <td class="paramname"> <em>val</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert a 16-bit value into an ASCII string of four hexadecimal digits and send it to the UART. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>The value to convert and send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3a3fda37b97236209a8f1e678a7d42f3"></a><!-- doxytag: member="debug.h::DebugWriteUint32" ref="ga3a3fda37b97236209a8f1e678a7d42f3" args="(uint32 const val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DebugWriteUint32 </td>
          <td>(</td>
          <td class="paramtype">uint32 const &#160;</td>
          <td class="paramname"> <em>val</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert a 32-bit value into an ASCII string of eight hexadecimal digits and send it to the UART. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>The value to convert and send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
<a class="anchor" id="gae1cda846405bb1613f6acbafd25a1cc1"></a><!-- doxytag: member="debug.h::DebugWriteUint8" ref="gae1cda846405bb1613f6acbafd25a1cc1" args="(uint8 const val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DebugWriteUint8 </td>
          <td>(</td>
          <td class="paramtype">uint8 const &#160;</td>
          <td class="paramname"> <em>val</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert an 8-bit value into an ASCII string of two hexadecimal digits and send it to the UART. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>The value to convert and send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Nothing. </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Jun 22 2016 11:39:14 for CSR µEnergy&reg; Firmware by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
